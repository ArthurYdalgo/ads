{"version":3,"sources":["webpack://@flagrow/ads/webpack/bootstrap","webpack://@flagrow/ads/./forum.js","webpack://@flagrow/ads/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flagrow/ads/./src/forum/addAdBetweenPosts.js","webpack://@flagrow/ads/./src/forum/addAdUnderHeader.js","webpack://@flagrow/ads/./src/forum/addAdUnderNavItems.js","webpack://@flagrow/ads/./src/forum/components/AdPostType.js","webpack://@flagrow/ads/./src/forum/index.js","webpack://@flagrow/ads/external \"flarum.core.compat['app']\"","webpack://@flagrow/ads/external \"flarum.core.compat['components/EventPost']\"","webpack://@flagrow/ads/external \"flarum.core.compat['components/HeaderPrimary']\"","webpack://@flagrow/ads/external \"flarum.core.compat['components/IndexPage']\"","webpack://@flagrow/ads/external \"flarum.core.compat['components/PostStream']\"","webpack://@flagrow/ads/external \"flarum.core.compat['extend']\""],"names":["extend","prototype","component","advertisement","forum","attribute","children","length","start","parseInt","between","commentPosts","filter","post","attrs","forEach","i","console","log","push","m","trust","isInitialized","context","document","getElementsByClassName","app","appElement","adsElement","createElement","className","innerHTML","parentNode","insertBefore","items","add","AdPostType","icon","content","props","contentHtml","initializers","postComponents","ad","addAdUnderHeader","addAdUnderNavItems","addAdBetweenPosts"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport PostStream from 'flarum/components/PostStream';\n\nexport default function() {\n    extend(PostStream.prototype, 'view', function(component) {\n        const advertisement = app.forum.attribute('flagrow.ads.between-posts');\n\n        if (advertisement && component.children.length) {\n            const start = parseInt(app.forum.attribute('flagrow.ads.start-from-post') || 1);\n            const between = parseInt(app.forum.attribute('flagrow.ads.between-n-posts') || 5);\n            // We need to copy all comments first, otherwise there is no way to detect and jump the last comment\n            const commentPosts = component.children.filter(post => post.attrs['data-type'] === 'comment');\n\n            // Insert an inside every n comment\n            commentPosts.forEach((post, i) => {\n                if (i >= start && (i - start) % between === 0 && i < commentPosts.length - 1) {\n                    console.log('Adding advertisement');\n                    post.children.push(\n                        m('div.Flagrow-Ads-fake-poststream-item',\n                            m('article.Post.EventPost',\n                                m('div.Flagrow-Ads-between-posts.EventPost-info', m.trust(advertisement))\n                            )\n                        )\n                    );\n                }\n            });\n        }\n    });\n}\n","import { extend } from 'flarum/extend';\nimport HeaderPrimary from 'flarum/components/HeaderPrimary';\n\nexport default function () {\n    extend(HeaderPrimary.prototype, 'config', (isInitialized, context) => {\n\n        if (isInitialized) { return; }\n\n        if (document.getElementsByClassName('Flagrow-Ads-under-header').length) {\n            return;\n        }\n\n        const advertisement = app.forum.attribute('flagrow.ads.under-header');\n\n        if (advertisement) {\n\n            var appElement = document.getElementsByClassName('App-content')[0];\n\n            var adsElement = document.createElement('div');\n\n            adsElement.className = 'Flagrow-Ads-under-header';\n            adsElement.innerHTML = advertisement;\n\n            appElement.parentNode.insertBefore(adsElement, appElement);\n        }\n    });\n}\n","import { extend } from 'flarum/extend';\nimport IndexPage from 'flarum/components/IndexPage';\n\nexport default function() {\n    extend(IndexPage.prototype, 'sidebarItems', function(items) {\n\n\n        const advertisement = app.forum.attribute('flagrow.ads.under-nav-items');\n\n        if (advertisement) {\n\n            // set priority higher to move up\n            items.add('flagrow-ad', m.trust(advertisement), -100);\n        }\n    });\n}\n","import EventPost from \"flarum/components/EventPost\";\n\nexport default class AdPostType extends EventPost {\n    icon() {\n        return 'fas fa-audio-description';\n    }\n\n    content() {\n        return m('div', {\n            className: 'Flagrow-Ads-between-posts EventPost-info'\n        }, [\n            m.trust(this.props.post.contentHtml())\n        ]);\n    }\n}\n","import app from 'flarum/app';\nimport addAdUnderHeader from './addAdUnderHeader';\nimport addAdUnderNavItems from './addAdUnderNavItems';\nimport addAdBetweenPosts from './addAdBetweenPosts';\nimport AdPostType from './components/AdPostType';\n\napp.initializers.add('flagrow-ads', app => {\n    app.postComponents.ad = AdPostType;\n\n    addAdUnderHeader();\n    addAdUnderNavItems();\n    addAdBetweenPosts();\n});\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/EventPost'];","module.exports = flarum.core.compat['components/HeaderPrimary'];","module.exports = flarum.core.compat['components/IndexPage'];","module.exports = flarum.core.compat['components/PostStream'];","module.exports = flarum.core.compat['extend'];"],"sourceRoot":""}